<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Deep In Thinking | Just do it</title>

  
  <meta name="author" content="dpthinker">
  

  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="Deep In Thinking"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Deep In Thinking" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Deep In Thinking</a>
    </h1>
    <p class="site-description">Just do it</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/categories">Categories</a></li>
      
        <li><a href="/tags">Tags</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2020/02/16/coroutine-talking-code-ananlyze/"><span>白话协程之极简协程库分析</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2020/02/16/coroutine-talking-code-ananlyze/" rel="bookmark">
        <time class="entry-date published" datetime="2020-02-16T10:56:14.000Z">
          2020-02-16
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p> “Talk is cheap. Show me the code.”   ― Linus Torvalds.</p>
</blockquote>
<p>在上篇文章，我们介绍了协程的基本概念，现在我们借用云风设计和实现的C协程库，对协程进行更深入剖析，相信这篇文章可以让大家更深入更清晰了解协程本质。</p>
<h2 id="一、极简协程库"><a href="#一、极简协程库" class="headerlink" title="一、极简协程库"></a>一、极简协程库</h2><p>在github上搜索<code>coroutine</code>，第一个仓便是<a href="https://github.com/cloudwu" target="_blank" rel="noopener">cloudwu</a>/<strong><a href="https://github.com/cloudwu/coroutine" target="_blank" rel="noopener">coroutine</a></strong>，简单看后发现设计极简，代码相当的少，是用来研究协程的绝佳例子。</p>
<p>整个库只有两个文件：一个头文件<code>coroutine.h</code>和一个实现文件<code>coroutine.c</code>，总共<strong>191行</strong>代码。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------------</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Language                     files          blank        comment           code</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------------</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">C                                1             17              0            175</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">C/C++ Header                     1              6              0             16</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------------</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">SUM:                             2             23              0            191</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------------</span></pre></td></tr></table></figure>

<p><code>cloudwu/coroutine</code>设计的是<code>Asymmetric coroutine</code>，所谓<code>Asymmetric coroutine</code>就是提供了两个接口（<code>invoke</code>和<code>suspend</code>）用于协程调度。对应的，<code>Symmetric coroutine</code>就是提供了一种切换接口的协程。</p>
        
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/协程-编程语言/">协程,编程语言</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2020/02/14/coroutine-talking-101/"><span>白话协程之基础概念</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2020/02/14/coroutine-talking-101/" rel="bookmark">
        <time class="entry-date published" datetime="2020-02-14T14:27:43.000Z">
          2020-02-14
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="一、协程是什么？"><a href="#一、协程是什么？" class="headerlink" title="一、协程是什么？"></a>一、协程是什么？</h2><p>在Android主推Kotlin语言后，Kotlin的Coroutine协程特性赢得了大家的广泛关注，一时风光无两。但是，协程到底是什么呢？有人说，协程就是轻量的线程，把它当成线程看就行了。然而，真的是这样吗？</p>
        
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/协程/">协程</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2019/12/31/summary-2019/"><span>Bye 2019, Hello 2020</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/12/31/summary-2019/" rel="bookmark">
        <time class="entry-date published" datetime="2019-12-31T12:02:32.000Z">
          2019-12-31
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>今天是2019年的最后一天，又是辞旧迎新的日子，年过三十后，感觉时间过的越来越快。</p>
<h2 id="工作总结"><a href="#工作总结" class="headerlink" title="工作总结"></a>工作总结</h2><p>今年先是主导了技术项目对上游系统新版本的升级适配，对整个技术项目有了相对全局的认识，大大小小的坑填了不少，也跟项目中的各个模块的同事混了个脸熟。</p>
        
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/个人总结/">个人总结</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2019/12/29/reading_cdw/"><span>心若菩提 身如征铎</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/12/29/reading_cdw/" rel="bookmark">
        <time class="entry-date published" datetime="2019-12-29T14:05:01.000Z">
          2019-12-29
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>昨天下半年的工作基本联调验证结束，心里终于放松了起来，便订了一本今曹德旺先生的《心若菩提》。今天早上就收到了，本想慢慢读，不成想一读就放不下了，一口气读到现在，读完合上书还是激动不已。</p>
        
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/个人总结/">个人总结</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2019/12/05/about/"><span>关于</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/12/05/about/" rel="bookmark">
        <time class="entry-date published" datetime="2019-12-05T13:10:21.000Z">
          2019-12-05
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="关于我"><a href="#关于我" class="headerlink" title="关于我"></a>关于我</h2><p>高级软件工程师 @<strong>华为</strong></p>
<p>8年Android系统开发和优化经验，业余学习了些机器学习和TensorFlow的皮毛。</p>
<p>2018~2019年 <strong>Google Developer Expert</strong> in Machine Learning，2018年11月由谷歌全程资助去美国硅谷谷歌总部参加GDE Summit 2018。</p>
<h2 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h2><p>dpthinker#at#qq.com</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>




<nav class="pagination">
  
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2020 dpthinker
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>